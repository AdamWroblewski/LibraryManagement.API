    trigger:
      - main

    pool:
      vmImage: 'windows-latest'

    variables:
      buildConfiguration: 'Release'

    steps:
      - task: UseDotNet@2
        inputs:
          packageType: 'sdk'
          version: '8.x'
          installationPath: $(Agent.ToolsDirectory)/dotnet

      - script: dotnet restore
        displayName: 'Restore NuGet packages'

      - script: dotnet build --configuration $(buildConfiguration) --no-restore
        displayName: 'Build'

      - script: dotnet publish -c $(buildConfiguration) -o $(Build.ArtifactStagingDirectory)
        displayName: 'Publish'

      - task: AzureWebApp@1
        inputs:
          azureSubscription: '<your-service-connection-name>'
          appType: 'webApp'
          appName: '<your-app-service-name>'
          package: '$(Build.ArtifactStagingDirectory)/**/*.zip'
    